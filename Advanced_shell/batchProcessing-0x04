#!/bin/bash

# Create output directory
mkdir -p pokemon_data

# List of Pokémon
POKEMONS=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")

# Function to fetch a single Pokémon
fetch_pokemon() {
  local name=$1
  curl -s "https://pokeapi.co/api/v2/pokemon/$name" -o "pokemon_data/${name}.json" || echo "Failed to fetch $name" >> errors.txt
}

# Clear previous errors
> errors.txt

# Fetch all in parallel
for name in "${POKEMONS[@]}"; do
  fetch_pokemon "$name" &
done

# Wait for all background jobs to finish
wait

echo "✅ All Pokémon data fetched in parallel."
